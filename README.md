# Lab-6-refactoring

## Проблемы качества в исходном коде: 
- Нарушение принципа единственной ответственности: функция process_checkout выполняла много различных задач: валидацию, подсчет суммы, скидки и налога;
- магические числа в коде: числа для процентов скидок: 0.1, 0.2, пороговые суммы: 100, 200, размер налога: 0.21 и другие;
- сложность понимания логики расчета скидок - она была вложенной и трудночитаемой.

## Примененные рефакторинги: 
1. Извлечение функции: разбиение одной длинной функции на несколько простых:
- parse_request() — выделен разбор входных данных;
- validate_fields() — валидация обязательных полей;
- validate_items() — валидация структуры товаров;
- count_subtotal() — подсчет суммы заказа;
- count_disscount() — расчет скидок;
- count_tax() — расчет налогов

2. Замена магических чисел на именованные константы:
- discount_on_SAVE10=0.10
- discount_on_SAVE20 = 0.20
- min_total_for_SAVE20 = 200
и другие.

3. Улучшение читаемости через последовательный вызов: теперь в основной функции реализована четкая последовательность операций.

## Итог: 
- главная функция сокращена с 44 строк до 18 строк;
- каждая вспомогательная функция имеет одну четкую ответственность, которую легче заменить в отдельной функции, не влияя на остальной код;
- числа вынесены в константы, что улучшает их поиск и замену;
- код читается как сценарий сверху вниз;
- легче тестировать - можно проверять функции по отдельности
